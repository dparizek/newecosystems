/**!
 * AngularJS file upload shim for HTML5 FormData
 * @author  Danial  <danial.farid@gmail.com>
 * @version 1.1.1
 */
(function(){window.XMLHttpRequest&&(XMLHttpRequest=window.FormData?function(c){return function(){var a=new c;a.send=function(c){return function(){if(arguments[0]instanceof FormData){var b=arguments[0];b.__uploadProgress_&&a.upload.addEventListener("progress",function(a){b.__uploadProgress_(a)},!1)}c.apply(a,arguments)}}(a.send);return a}}(XMLHttpRequest):function(c){return function(){var a=new c,g=a.send;a.__requestHeaders=[];a.open=function(b){a.upload={addEventListener:function(b,d,c){"progress"==
b&&(a.__progress=d)}};return function(e,d,c){b.apply(a,[e,d,c]);a.__url=d}}(a.open);a.getResponseHeader=function(b){return function(c){return a.__fileApiXHR?a.__fileApiXHR.getResponseHeader(c):b.apply(a,[c])}}(a.getResponseHeader);a.getAllResponseHeaders=function(b){return function(){return a.__fileApiXHR?a.__fileApiXHR.getAllResponseHeaders():b.apply(a)}}(a.getAllResponseHeaders);a.send=function(){if(FormData.__isShim){var b=arguments[0];b.__uploadProgress_&&a.upload.addEventListener("progress",
function(a){b.__uploadProgress_(a)},!1);for(var c={url:a.__url,complete:function(c,b){Object.defineProperty(a,"status",{get:function(){return b.status}});Object.defineProperty(a,"statusText",{get:function(){return b.statusText}});Object.defineProperty(a,"readyState",{get:function(){return 4}});Object.defineProperty(a,"response",{get:function(){return b.response}});Object.defineProperty(a,"responseText",{get:function(){return b.responseText}});a.__fileApiXHR=b;a.onreadystatechange()},progress:function(b){a.__progress(b)},
headers:a.__requestHeaders,data:{},files:{}},d=0;d<b.data.length;d++){var f=b.data[d];f.val.name&&f.val.size&&f.val.type?c.files[f.key]=f.val:c.data[f.key]=f.val}FileAPI.upload(c)}else g.apply(a,arguments)};return a}}(XMLHttpRequest));window.FormData||(HTMLInputElement.prototype.addEventListener=HTMLInputElement.prototype.attachEvent=function(c){return function(a,g,b,e){if("change"!==a.toLowerCase()&&"onchange"!==a.toLowerCase()||"file"!=this.getAttribute("type"))c.apply(this,[a,g,b,e]);else{if(!this.__isWrapped&&
(null!=this.getAttribute("ng-file-select")||null!=this.getAttribute("data-ng-file-select"))){var d=document.createElement("div");d.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>';var d=d.firstChild,f=this.parentNode;f.insertBefore(d,this);f.removeChild(this);d.appendChild(this);this.__isWrapped=!0}c.apply(this,[a,function(a){var b=FileAPI.getFiles(a);a.target||(a.target={});a.target.files=b;a.target.files.item=function(b){return a.target.files[b]||null};
g(a)},b,e])}}}(HTMLInputElement.prototype.addEventListener||HTMLInputElement.prototype.attachEvent),window.FormData=FormData=function(){return{append:function(c,a,g){this.data.push({key:c,val:a,name:g})},data:[]}},FormData.__isShim=!0,function(){if(!window.FileAPI||!FileAPI.upload){var c="",a=document.createElement("script"),g=document.getElementsByTagName("script"),b,e,d;if(window.FileAPI&&window.FileAPI.jsPath)c=window.FileAPI.jsPath;else for(b=0;b<g.length;b++)if(d=g[b].src,e=d.indexOf("angular-file-upload-shim.js"),
-1==e&&(e=d.indexOf("angular-file-upload-shim.min.js")),-1<e){c=d.substring(0,e);break}window.FileAPI&&null!=FileAPI.staticPath||(FileAPI={staticPath:c});a.setAttribute("src",c+"FileAPI.min.js");document.getElementsByTagName("head")[0].appendChild(a)}}())})();